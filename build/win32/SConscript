import sys
import os.path
import SCons.Util

# import user environment configuration
import build_config

Import('env')

# configure additional include and library paths according to user environment config
# paths = ['OPENSCENEGRAPH', 'OPENSCENEGRAPH_DEP']

env.AppendUnique(CPPPATH = ['#/ext/include'])
env.AppendUnique(LIBPATH = ['#/ext/lib'])

env.AppendUnique(CPPPATH = os.path.join(sys.prefix, 'include'))
env.AppendUnique(LIBPATH = os.path.join(sys.prefix, 'lib'))
#env.AppendUnique(LINKFLAGS = ['/EXPORT'])
    
# add WIN32 define and exception handling flags
env.Append(CXXFLAGS = ['/GR', '/EHsc'])
env.Append(CPPDEFINES = ['WIN32'])

# debug / release flags
if env['DEBUG']:
	env.Append(CXXFLAGS = ['/Zi', '/Od'])
	env.Append(LINKFLAGS = ['/DEBUG'])
else:
	env.Append(CXXFLAGS = ['/O2'])
	
# return modified environment
Return('env')
